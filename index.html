<!DOCTYPE html>
<html lang="EN" ng-app="myApp" ng-cloak>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
	<title>{{strip_tags(title.singleNodeValue.textContent)}}</title>
<style>
@media (min-width: 576px) {
	form label {text-align: right;}
}
{{style.singleNodeValue.textContent}}
cd {
    display: inline-block;
    margin: 5px;
    border: 3px solid #8AC007; 
}
t3 t1 {float:left;color:white;background-color:blue;
    width: 10px;height: 10px;}
t3 t2 {float:left;background-color:white;
    width: 10px;height: 10px;}
t4 t1 {float:right;color:white;background-color:blue;
    width: 10px;height: 10px;}
t4 t2 {float:right;background-color:white;
    width: 10px;height: 10px;}
t3 {display: block;clear:left;}
t4 {display: block;clear:right;}
</style>
</head>
<body id="demo" ng-controller="pname">
<div class="d-block d-md-none">
<nav class="navbar bg-dark navbar-dark fixed-top">
  <a class="navbar-brand" href="#" ng-bind-html="title.singleNodeValue.textContent | trustHtml"></a>
  <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#myNavbar">
	<span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="myNavbar">
    <ul class="navbar-nav">
        <li class='nav-item' ng-repeat="x in pnames">
			<a class='nav-link{{active($index+1," active",1)}}' href="#" ng-click="render($index+1,1)"
			ng-bind-html="ic_html(x) | trustHtml"></a>
		</li>
	</ul>
  </div>
</nav>
</div>
   <div class="container" style="padding-bottom: 20px;">
      <div class="d-block d-md-none" style="padding-top: 50px;"></div>
      <div class="row">
         <div class="col-md-3" style="padding: 20px" id="title">
		 <svg height="50" width="450">
		    <filter id="lightMe1">
		      <feDiffuseLighting in="SourceGraphic" result="light"
			 lighting-color="white">
		      <fePointLight x="225" y="60" z="40" />
		      </feDiffuseLighting>

		      <feComposite in="SourceGraphic" in2="light"
			 operator="arithmetic" k1="1" k2="0" k3="0" k4="0"/>
		    </filter>
		    <text font-size="45" font-weight="bold" x="0" y="45" fill="white" filter="url(#lightMe1)">{{title.singleNodeValue.textContent}}</text> 
		 </svg>
         </div>
         <div class="col-md-9" style="padding-bottom: 20px;">
            <img class='img-fluid' src='{{img.singleNodeValue.textContent}}'>
         </div>
      </div>
      <div class="row">
         <div class="col-md-3 d-none d-md-block">
                  <br>
                  <div class="btn-group-vertical btn-group-lg" style="position: fixed;">
                     <a href='#' class='btn btn-primary{{active($index+1," active",1)}}' ng-repeat="x in pnames"
					 ng-click="render($index+1,1)" ng-bind-html="ic_html(x) | trustHtml"></a>
					 <ul class="dropdown-menu" role="menu">
						 <li ng-repeat="x in pnames2">
							<a class='dropdown-item{{active($index+1," active",2)}}' href="#"
							ng-click="render($index+1,2)" ng-bind-html="ic_html(x) | trustHtml"></a>
						 </li>
                     </ul>
                     <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                     {{title2.singleNodeValue.textContent | trustHtml}} <span class="caret"></span></button>
                  </div>
                  <br>
                  <br>
         </div>
         <div class="col-md-9">
           <div class="card bg-primary">
	       <div class="card-header text-white" ng-show="attr.singleNodeValue.textContent == 'input'">
		       <center>Raster Font Viewer - Input & Display</center>
		   </div>
               <div class="card-body bg-light">
					<div ng-bind-html="contents | trustHtml"></div>
				   <form class="form-horizontal" role="form" ng-show="attr.singleNodeValue.textContent == 'input'">
					  <div class="form-group">
						 <label class="control-label col-sm-4" for="offset">
							Offset (bytes):
						 </label>
						 <input type="number" id="sub2" value="0" min="0" max="99999" size="2">
					  </div>
					  <div class="form-group">
						 <label class="control-label col-sm-4" for="length">
							Length (bytes):
						 </label>
						 <input type="number" id="sub3" value="0" min="0" max="99999" size="2">
					  </div>
					  <div class="form-group">
						 <label class="control-label col-sm-4" for="height">
							Character Height:
						 </label>
						 <input type="number" id="sub4" value="8" min="0" max="99" size="2">
					  </div>
					  <div class="form-group">
						 <label class="control-label col-sm-4" for="width">
							Character Width:
						 </label>
						 <select id="sub5">
							<option selected value="0">8
							<option value="1">16
						 </select>
					  </div>
					  <div class="form-group">
						 <label class="control-label col-sm-4" for="rchar">
							<input type="checkbox" id="chbx1" value="1">
							Reverse Char
						 </label>
					  </div>
					  <div class="form-group">
						 <div class="col-sm-10">
							<input type="file" class="form-control" id="files" name="files[]" />
							<output id="list"></output>
						 </div>
					  </div>
				   </form>
					<form class="form-horizontal" role="form" method="post" ng-show="attr.singleNodeValue.textContent == 'form'">
					  <div class="form-group row">
						 <label class="col-form-label col-sm-4" for="name">Name:</label>
						 <div class="col-sm-6">
							<input type="text" class="form-control" name="name">
						 </div>
					  </div>
					  <div class="form-group row">
						 <label class="col-form-label col-sm-4" for="email">Email Address:</label>
						 <div class="col-sm-6">
							<input type="email" class="form-control" name="email">
						 </div>
					  </div>
					  <div class="form-group row">
						 <label class="col-form-label col-sm-4" for="subject">Subject:</label>
						 <div class="col-sm-6">
							<input type="text" class="form-control" name="subject">
						 </div>
					  </div>
					  <div class="form-group row">
						 <label class="col-form-label col-sm-4" for="message">Message:</label>
						 <div class="col-sm-6">
							<textarea class="form-control" rows="5" name="message"></textarea>
							<br>
							<input type="submit" class="btn btn-danger" value="Submit">
						 </div>
					  </div>
					</form>
					<div ng-show="attr.singleNodeValue.textContent == 'comments'">
						<!-- begin htmlcommentbox.com -->
						<div id="HCB_comment_box" style="background-color: transparent;"><a href="https://www.htmlcommentbox.com">HTML Comment Box</a> is loading comments...</div>
						<link rel="stylesheet" type="text/css" href="https://www.htmlcommentbox.com/static/skins/default/skin.css" />
						<script type="text/javascript" language="javascript" id="hcb"> /*<!--*/ if(!window.hcb_user){hcb_user={  };} (function(){s=document.createElement("script");s.setAttribute("type","text/javascript");s.setAttribute("src", "https://www.htmlcommentbox.com/jread?page="+escape((window.hcb_user && hcb_user.PAGE)||(""+window.location)).replace("+","%2B")+"&opts=470&num=10");if (typeof s!="undefined") document.getElementsByTagName("head")[0].appendChild(s);})(); /*-->*/ </script>
						<!-- end htmlcommentbox.com -->
					</div>
               </div>
           </div>
         </div>
      </div>
   </div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
<script src="scripts/ajs-theme.js"></script>
<SCRIPT LANGUAGE="JavaScript">

if (window.File && window.FileReader && window.FileList && window.Blob) {
  // Great success! All the File APIs are supported.
} else {
  alert('The File APIs are not fully supported in this browser.');
}

// Modified so it will work on IE.

 function readSingleFile(evt) {
    //Retrieve the first (and only!) File from the FileList object
   var f = evt.target.files[0]; 

    if (!f) {
        alert("Failed to load file");
    } else if (!(f.name.match(/rom/i) || f.name.match(/bin/i) || f.name.match(/64c/i) ||
                 f.name.match(/fnt/i) || f.name.match(/fon/i) || f.name.match(/psfu/i))) {
		    alert(f.name + " is not a valid binary character file.");
    } else {
             var r = new FileReader();
             r.onload = function(e) { 
	        var buffer = e.target.result;
                var os = parseInt($("#sub2").val());
                var l = parseInt($("#sub3").val());
                var ch = parseInt($("#sub4").val());
                if (document.getElementById("chbx1").checked) var tn="4"; else var tn="3";
                var cw = parseInt($("#sub5").val());
                if (cw) {
                   if (l) var view = new Uint16Array(buffer,os,l); else var view = new Uint16Array(buffer,os);
                }
                else {
                   if (l) var view = new Uint8Array(buffer,os,l); else var view = new Uint8Array(buffer,os);
                }
                var nbe = view.BYTES_PER_ELEMENT;
                var binary_string = "";
                for (idx=0;idx<view.length;idx++) {
                   var v = view[idx];
                   var c = idx % ch;
                   if (c==0) {
                      var h = idx / ch;
                      binary_string+="<cd data-toggle='tooltip' data-placement='auto top' title='" + 
                                     h.toString(16) + ' (' + h.toString(10)+")'>";
                   }
                   var j = 1;
                   binary_string += '<t' + tn + '>';
                   do {
                      var b = v & 0xFF;
                  
                      for (var i =0; i < 8; ++i)
                         binary_string += (b & (1<<(7-i))) ? "<t1></t1>" : "<t2></t2>";
                      v >>= 8;                  
                   } while (nbe > j++);
                   binary_string += '</t' + tn + '>';
                   if (c==(ch-1)) binary_string+="</cd>";
                }
                //document.write(binary_string);
                $("#demo").html(binary_string);
                $('[data-toggle="tooltip"]').tooltip();
             }
             r.readAsArrayBuffer(f);
           }
    }

  document.getElementById('files').addEventListener('change', readSingleFile, false);

</SCRIPT>
</body>
<script>

//if ($(".container").height() < window.outerHeight)
//   $(".container").height(window.outerHeight);

</script>
</html>
